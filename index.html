<!DOCTYPE html>
<html>
<head>
  <title>Tickets Hunter - 雲端控制台</title>
  <meta charset="UTF-8" />
  <link href="dist/bootstrap/bootstrap.min.css" rel="stylesheet" />
  <script src="dist/jquery.min.js"></script>
  <script src="dist/bootstrap/bootstrap.min.js"></script>
  <link rel="stylesheet" type="text/css" href="css/settings.css" />
  <style>
    /* 這裡可以加一點自定義樣式 */
    body { padding-bottom: 100px; }
  </style>
</head>
<body>
  <div class="container mt-5">
    <h1>原版設定介面 (已串接)</h1>
    <hr/>
    <div class="col-12">
      <button class="btn btn-primary" id="save_btn">存檔 (連至本地)</button>
    </div>
  </div>

  <script>
    // 關鍵修改：強制指向本地 API
    const LOCAL_API_BASE = "http://127.0.0.1:16888";

    $(document).ready(function() {
        // 修改原本的存檔點擊事件
        $('#save_btn').click(function() {
            // 這裡抓取網頁上所有欄位的值 (原本的 JS 邏輯)
            // 下面是修改後的發送方式
            const configData = { /* ... 這裡會根據你網頁上的欄位抓取資料 ... */ };

            $.ajax({
                url: LOCAL_API_BASE + "/save_config", // 指向家裡的電腦
                type: "POST",
                data: JSON.stringify(configData),
                contentType: "application/json",
                success: function(res) {
                    alert("存檔成功！已同步至本地 settings.json");
                },
                error: function() {
                    alert("錯誤：無法連線到本地程式。請確認 settings.exe 已開啟並具備 CORS 權限。");
                }
            });
        });
    });
  </script>
</body>
</html>
